<?php
$params = [];
$keys = [];
$param_str = "$1 = '00001326', $2 = '00002769', $3 = '00003888', $4 = '00017119', $5 = '00044281', $6 = '00170862', $7 = '00173346', $8 = '00173941', $9 = '00174852', $10 = '00175831', $11 = '00176773', $12 = '00177288', $13 = '00181137', $14 = '00187328', $15 = '00197207', $16 = '00197841', $17 = '00234159', $18 = '00237150', $19 = '00247759', $20 = '00250804', $21 = '00253308', $22 = '00258774', $23 = '00259665', $24 = '00275098', $25 = '00299202', $26 = '00308878', $27 = '00320038', $28 = '00324190', $29 = '00364732', $30 = '00389815', $31 = '00390056', $32 = '00390484', $33 = '00406036', $34 = '00407448', $35 = '00409717', $36 = '00410616', $37 = '00411348', $38 = '00423868', $39 = '00427512', $40 = '00428752', $41 = '00428766', $42 = '00428811', $43 = '00428883', $44 = '00428956', $45 = '00429048', $46 = '00429070', $47 = '00429279', $48 = '00429321', $49 = '00429405', $50 = '00429456', $51 = '00429473', $52 = '00429545', $53 = '00429677', $54 = '00440645', $55 = '00443208', $56 = '00454057', $57 = '00462439', $58 = '00466197', $59 = '00478403', $60 = '00487163', $61 = '00492647', $62 = '00498580', $63 = '00511198', $64 = '00533624', $65 = '00534594', $66 = '00540409', $67 = '00543579', $68 = '00552392', $69 = '00556983', $70 = '00561704', $71 = '00562857', $72 = '00566480', $73 = '00567519', $74 = '00586191', $75 = '00588031', $76 = '00589083', $77 = '00590492', $78 = '00595788', $79 = '00599370', $80 = '00600436', $81 = '00605232', $82 = '00622459', $83 = '00624100', $84 = '00639972', $85 = '00641650', $86 = '00645192', $87 = '00650709', $88 = '00655286', $89 = '00675220', $90 = '00676361', $91 = '00678785', $92 = '00679071', $93 = '00679207', $94 = '00679883', $95 = '00680598', $96 = '00680632', $97 = '00680677', $98 = '00681654', $99 = '00682095', $100 = '00682112', $101 = '00682128', $102 = '00684799', $103 = '00684817', $104 = '00684822', $105 = '00684842', $106 = '00685543', $107 = '00686182', $108 = '00687754', $109 = '00688012', $110 = '00688261', $111 = '00688600', $112 = '00688933', $113 = '00692445', $114 = '00693239', $115 = '00693608', $116 = '00694391', $117 = '00698887', $118 = '00699710', $119 = '00699734', $120 = '00699806', $121 = '00699879', $122 = '00699947', $123 = '00699968', $124 = '00700701', $125 = '00700965', $126 = '00700975', $127 = '00703243', $128 = '00704882', $129 = '00705020', $130 = '00705158', $131 = '00705817', $132 = '00706283', $133 = '00707301', $134 = '00707661', $135 = '00707776', $136 = '00709158', $137 = '00711673', $138 = '00711789', $139 = '00712669', $140 = '00714471', $141 = '00722143', $142 = '00727976', $143 = '00729939', $144 = '00735865', $145 = '00744965', $146 = '00750047', $147 = '00750459', $148 = '00752501', $149 = '00754316', $150 = '00754455', $151 = '00758574', $152 = '00762523', $153 = '00771042', $154 = '00779797', $155 = '00790923', $156 = '00792753', $157 = '00792802', $158 = '00793293', $159 = '00797013', $160 = '00797181', $161 = '00797782', $162 = '00800189', $163 = '00806447', $164 = '00811648', $165 = '00812939', $166 = '00813847', $167 = '00820257', $168 = '00821490', $169 = '00825334', $170 = '00825433', $171 = '00832769', $172 = '00834788', $173 = '00838032', $174 = '00838112', $175 = '00861089', $176 = '00881180', $177 = '00882904', $178 = '00882907', $179 = '00882908', $180 = '00882911', $181 = '00883523', $182 = '00886981', $183 = '00887171', $184 = '00891386', $185 = '00892009', $186 = '00892404', $187 = '00893835', $188 = '00894669', $189 = '00894748', $190 = '00894765', $191 = '00895387', $192 = '00897124', $193 = '00902645', $194 = '00904957', $195 = '00907022', $196 = '00907417', $197 = '00912866', $198 = '00913324', $199 = '00914794', $200 = '00914852', $201 = '00923960', $202 = '00924248', $203 = '00925074', $204 = '00930141', $205 = '00930296', $206 = '00934752', $207 = '00940901', $208 = '00950369', $209 = '00952485', $210 = '00968810', $211 = '00969887', $212 = '00972972', $213 = '00975483', $214 = '00979273', $215 = '00979614', $216 = '00980555', $217 = '00981679', $218 = '00983405', $219 = '00983424', $220 = '00983793', $221 = '00984218', $222 = '00988463', $223 = '00990703', $224 = '00993069', $225 = '00996608', $226 = '01001008', $227 = '01002125', $228 = '01003841', $229 = '01012779', $230 = '01012917', $231 = '01015297', $232 = '01015682', $233 = '01015835', $234 = '01015880', $235 = '01020519', $236 = '01020835', $237 = '01021674', $238 = '01023978', $239 = '01026930', $240 = '01028727', $241 = '01033072', $242 = '01034474', $243 = '01034999', $244 = '01043046', $245 = '01043237', $246 = '01045099', $247 = '01054799', $248 = '01055542', $249 = '01061610', $250 = '01063320', $251 = '01067965', $252 = '01069835', $253 = '01074233', $254 = '01075339', $255 = '01076247', $256 = '01076248', $257 = '01080656', $258 = '01081595', $259 = '01085682', $260 = '01087101', $261 = '01092292', $262 = '01093715', $263 = '01093980', $264 = '01095622', $265 = '01096216', $266 = '01101239', $267 = '01102570', $268 = '01105269', $269 = '01111241', $270 = '01112000', $271 = '01115563', $272 = '01119167', $273 = '01120058', $274 = '01122897', $275 = '01125712', $276 = '01130677', $277 = '01130936', $278 = '01133194', $279 = '01136715', $280 = '01139745', $281 = '01149730', $282 = '01151158', $283 = '01152571', $284 = '01157029', $285 = '01177513', $286 = '01188073', $287 = '01190178', $288 = '01194079', $289 = '01199830', $290 = '01199999', $291 = '01203519', $292 = '01204657', $293 = '01206046', $294 = '01206432', $295 = '01207943', $296 = '01220697', $297 = '01220921', $298 = '01224548', $299 = '01232787', $300 = '01235792', $301 = '01236064', $302 = 'ca705175', $303 = 'na019649', $304 = '800', $305 = '800', $306 = 'S1', $307 = 'S3', $308 = 'S1', $309 = 'S3', $310 = '09', $311 = '10', $312 = '11', $313 = '12', $314 = '13', $315 = '14', $316 = '15', $317 = '16', $318 = '17', $319 = '18', $320 = '19', $321 = '20', $322 = '21', $323 = '22', $324 = '09', $325 = '10', $326 = '11', $327 = '12', $328 = '13', $329 = '14', $330 = '15', $331 = '16', $332 = '17', $333 = '18', $334 = '19', $335 = '20', $336 = '21', $337 = '22', $338 = '75232', $339 = '86156', $340 = '88570', $341 = '%ca%', $342 = '%na%', $343 = 'contractor', $344 = 'contractorsus', $345 = '246'";
$query_str = "SELECT userid AS id, MAX(inrules) AS addme, MAX(inmembers) AS deleteme  FROM (  SELECT u.id as userid, 1 AS inrules, 0 AS inmembers  FROM mdl_user u  WHERE u.username <> 'guest'  and u.deleted = 0  and u.confirmed = 1 AND (1=0  OR ( 1=1  AND (u.username ILIKE $1 ESCAPE '\' OR u.username ILIKE $2 ESCAPE '\' OR u.username ILIKE $3 ESCAPE '\' OR u.username ILIKE $4 ESCAPE '\' OR u.username ILIKE $5 ESCAPE '\' OR u.username ILIKE $6 ESCAPE '\' OR u.username ILIKE $7 ESCAPE '\' OR u.username ILIKE $8 ESCAPE '\' OR u.username ILIKE $9 ESCAPE '\' OR u.username ILIKE $10 ESCAPE '\' OR u.username ILIKE $11 ESCAPE '\' OR u.username ILIKE $12 ESCAPE '\' OR u.username ILIKE $13 ESCAPE '\' OR u.username ILIKE $14 ESCAPE '\' OR u.username ILIKE $15 ESCAPE '\' OR u.username ILIKE $16 ESCAPE '\' OR u.username ILIKE $17 ESCAPE '\' OR u.username ILIKE $18 ESCAPE '\' OR u.username ILIKE $19 ESCAPE '\' OR u.username ILIKE $20 ESCAPE '\' OR u.username ILIKE $21 ESCAPE '\' OR u.username ILIKE $22 ESCAPE '\' OR u.username ILIKE $23 ESCAPE '\' OR u.username ILIKE $24 ESCAPE '\' OR u.username ILIKE $25 ESCAPE '\' OR u.username ILIKE $26 ESCAPE '\' OR u.username ILIKE $27 ESCAPE '\' OR u.username ILIKE $28 ESCAPE '\' OR u.username ILIKE $29 ESCAPE '\' OR u.username ILIKE $30 ESCAPE '\' OR u.username ILIKE $31 ESCAPE '\' OR u.username ILIKE $32 ESCAPE '\' OR u.username ILIKE $33 ESCAPE '\' OR u.username ILIKE $34 ESCAPE '\' OR u.username ILIKE $35 ESCAPE '\' OR u.username ILIKE $36 ESCAPE '\' OR u.username ILIKE $37 ESCAPE '\' OR u.username ILIKE $38 ESCAPE '\' OR u.username ILIKE $39 ESCAPE '\' OR u.username ILIKE $40 ESCAPE '\' OR u.username ILIKE $41 ESCAPE '\' OR u.username ILIKE $42 ESCAPE '\' OR u.username ILIKE $43 ESCAPE '\' OR u.username ILIKE $44 ESCAPE '\' OR u.username ILIKE $45 ESCAPE '\' OR u.username ILIKE $46 ESCAPE '\' OR u.username ILIKE $47 ESCAPE '\' OR u.username ILIKE $48 ESCAPE '\' OR u.username ILIKE $49 ESCAPE '\' OR u.username ILIKE $50 ESCAPE '\' OR u.username ILIKE $51 ESCAPE '\' OR u.username ILIKE $52 ESCAPE '\' OR u.username ILIKE $53 ESCAPE '\' OR u.username ILIKE $54 ESCAPE '\' OR u.username ILIKE $55 ESCAPE '\' OR u.username ILIKE $56 ESCAPE '\' OR u.username ILIKE $57 ESCAPE '\' OR u.username ILIKE $58 ESCAPE '\' OR u.username ILIKE $59 ESCAPE '\' OR u.username ILIKE $60 ESCAPE '\' OR u.username ILIKE $61 ESCAPE '\' OR u.username ILIKE $62 ESCAPE '\' OR u.username ILIKE $63 ESCAPE '\' OR u.username ILIKE $64 ESCAPE '\' OR u.username ILIKE $65 ESCAPE '\' OR u.username ILIKE $66 ESCAPE '\' OR u.username ILIKE $67 ESCAPE '\' OR u.username ILIKE $68 ESCAPE '\' OR u.username ILIKE $69 ESCAPE '\' OR u.username ILIKE $70 ESCAPE '\' OR u.username ILIKE $71 ESCAPE '\' OR u.username ILIKE $72 ESCAPE '\' OR u.username ILIKE $73 ESCAPE '\' OR u.username ILIKE $74 ESCAPE '\' OR u.username ILIKE $75 ESCAPE '\' OR u.username ILIKE $76 ESCAPE '\' OR u.username ILIKE $77 ESCAPE '\' OR u.username ILIKE $78 ESCAPE '\' OR u.username ILIKE $79 ESCAPE '\' OR u.username ILIKE $80 ESCAPE '\' OR u.username ILIKE $81 ESCAPE '\' OR u.username ILIKE $82 ESCAPE '\' OR u.username ILIKE $83 ESCAPE '\' OR u.username ILIKE $84 ESCAPE '\' OR u.username ILIKE $85 ESCAPE '\' OR u.username ILIKE $86 ESCAPE '\' OR u.username ILIKE $87 ESCAPE '\' OR u.username ILIKE $88 ESCAPE '\' OR u.username ILIKE $89 ESCAPE '\' OR u.username ILIKE $90 ESCAPE '\' OR u.username ILIKE $91 ESCAPE '\' OR u.username ILIKE $92 ESCAPE '\' OR u.username ILIKE $93 ESCAPE '\' OR u.username ILIKE $94 ESCAPE '\' OR u.username ILIKE $95 ESCAPE '\' OR u.username ILIKE $96 ESCAPE '\' OR u.username ILIKE $97 ESCAPE '\' OR u.username ILIKE $98 ESCAPE '\' OR u.username ILIKE $99 ESCAPE '\' OR u.username ILIKE $100 ESCAPE '\' OR u.username ILIKE $101 ESCAPE '\' OR u.username ILIKE $102 ESCAPE '\' OR u.username ILIKE $103 ESCAPE '\' OR u.username ILIKE $104 ESCAPE '\' OR u.username ILIKE $105 ESCAPE '\' OR u.username ILIKE $106 ESCAPE '\' OR u.username ILIKE $107 ESCAPE '\' OR u.username ILIKE $108 ESCAPE '\' OR u.username ILIKE $109 ESCAPE '\' OR u.username ILIKE $110 ESCAPE '\' OR u.username ILIKE $111 ESCAPE '\' OR u.username ILIKE $112 ESCAPE '\' OR u.username ILIKE $113 ESCAPE '\' OR u.username ILIKE $114 ESCAPE '\' OR u.username ILIKE $115 ESCAPE '\' OR u.username ILIKE $116 ESCAPE '\' OR u.username ILIKE $117 ESCAPE '\' OR u.username ILIKE $118 ESCAPE '\' OR u.username ILIKE $119 ESCAPE '\' OR u.username ILIKE $120 ESCAPE '\' OR u.username ILIKE $121 ESCAPE '\' OR u.username ILIKE $122 ESCAPE '\' OR u.username ILIKE $123 ESCAPE '\' OR u.username ILIKE $124 ESCAPE '\' OR u.username ILIKE $125 ESCAPE '\' OR u.username ILIKE $126 ESCAPE '\' OR u.username ILIKE $127 ESCAPE '\' OR u.username ILIKE $128 ESCAPE '\' OR u.username ILIKE $129 ESCAPE '\' OR u.username ILIKE $130 ESCAPE '\' OR u.username ILIKE $131 ESCAPE '\' OR u.username ILIKE $132 ESCAPE '\' OR u.username ILIKE $133 ESCAPE '\' OR u.username ILIKE $134 ESCAPE '\' OR u.username ILIKE $135 ESCAPE '\' OR u.username ILIKE $136 ESCAPE '\' OR u.username ILIKE $137 ESCAPE '\' OR u.username ILIKE $138 ESCAPE '\' OR u.username ILIKE $139 ESCAPE '\' OR u.username ILIKE $140 ESCAPE '\' OR u.username ILIKE $141 ESCAPE '\' OR u.username ILIKE $142 ESCAPE '\' OR u.username ILIKE $143 ESCAPE '\' OR u.username ILIKE $144 ESCAPE '\' OR u.username ILIKE $145 ESCAPE '\' OR u.username ILIKE $146 ESCAPE '\' OR u.username ILIKE $147 ESCAPE '\' OR u.username ILIKE $148 ESCAPE '\' OR u.username ILIKE $149 ESCAPE '\' OR u.username ILIKE $150 ESCAPE '\' OR u.username ILIKE $151 ESCAPE '\' OR u.username ILIKE $152 ESCAPE '\' OR u.username ILIKE $153 ESCAPE '\' OR u.username ILIKE $154 ESCAPE '\' OR u.username ILIKE $155 ESCAPE '\' OR u.username ILIKE $156 ESCAPE '\' OR u.username ILIKE $157 ESCAPE '\' OR u.username ILIKE $158 ESCAPE '\' OR u.username ILIKE $159 ESCAPE '\' OR u.username ILIKE $160 ESCAPE '\' OR u.username ILIKE $161 ESCAPE '\' OR u.username ILIKE $162 ESCAPE '\' OR u.username ILIKE $163 ESCAPE '\' OR u.username ILIKE $164 ESCAPE '\' OR u.username ILIKE $165 ESCAPE '\' OR u.username ILIKE $166 ESCAPE '\' OR u.username ILIKE $167 ESCAPE '\' OR u.username ILIKE $168 ESCAPE '\' OR u.username ILIKE $169 ESCAPE '\' OR u.username ILIKE $170 ESCAPE '\' OR u.username ILIKE $171 ESCAPE '\' OR u.username ILIKE $172 ESCAPE '\' OR u.username ILIKE $173 ESCAPE '\' OR u.username ILIKE $174 ESCAPE '\' OR u.username ILIKE $175 ESCAPE '\' OR u.username ILIKE $176 ESCAPE '\' OR u.username ILIKE $177 ESCAPE '\' OR u.username ILIKE $178 ESCAPE '\' OR u.username ILIKE $179 ESCAPE '\' OR u.username ILIKE $180 ESCAPE '\' OR u.username ILIKE $181 ESCAPE '\' OR u.username ILIKE $182 ESCAPE '\' OR u.username ILIKE $183 ESCAPE '\' OR u.username ILIKE $184 ESCAPE '\' OR u.username ILIKE $185 ESCAPE '\' OR u.username ILIKE $186 ESCAPE '\' OR u.username ILIKE $187 ESCAPE '\' OR u.username ILIKE $188 ESCAPE '\' OR u.username ILIKE $189 ESCAPE '\' OR u.username ILIKE $190 ESCAPE '\' OR u.username ILIKE $191 ESCAPE '\' OR u.username ILIKE $192 ESCAPE '\' OR u.username ILIKE $193 ESCAPE '\' OR u.username ILIKE $194 ESCAPE '\' OR u.username ILIKE $195 ESCAPE '\' OR u.username ILIKE $196 ESCAPE '\' OR u.username ILIKE $197 ESCAPE '\' OR u.username ILIKE $198 ESCAPE '\' OR u.username ILIKE $199 ESCAPE '\' OR u.username ILIKE $200 ESCAPE '\' OR u.username ILIKE $201 ESCAPE '\' OR u.username ILIKE $202 ESCAPE '\' OR u.username ILIKE $203 ESCAPE '\' OR u.username ILIKE $204 ESCAPE '\' OR u.username ILIKE $205 ESCAPE '\' OR u.username ILIKE $206 ESCAPE '\' OR u.username ILIKE $207 ESCAPE '\' OR u.username ILIKE $208 ESCAPE '\' OR u.username ILIKE $209 ESCAPE '\' OR u.username ILIKE $210 ESCAPE '\' OR u.username ILIKE $211 ESCAPE '\' OR u.username ILIKE $212 ESCAPE '\' OR u.username ILIKE $213 ESCAPE '\' OR u.username ILIKE $214 ESCAPE '\' OR u.username ILIKE $215 ESCAPE '\' OR u.username ILIKE $216 ESCAPE '\' OR u.username ILIKE $217 ESCAPE '\' OR u.username ILIKE $218 ESCAPE '\' OR u.username ILIKE $219 ESCAPE '\' OR u.username ILIKE $220 ESCAPE '\' OR u.username ILIKE $221 ESCAPE '\' OR u.username ILIKE $222 ESCAPE '\' OR u.username ILIKE $223 ESCAPE '\' OR u.username ILIKE $224 ESCAPE '\' OR u.username ILIKE $225 ESCAPE '\' OR u.username ILIKE $226 ESCAPE '\' OR u.username ILIKE $227 ESCAPE '\' OR u.username ILIKE $228 ESCAPE '\' OR u.username ILIKE $229 ESCAPE '\' OR u.username ILIKE $230 ESCAPE '\' OR u.username ILIKE $231 ESCAPE '\' OR u.username ILIKE $232 ESCAPE '\' OR u.username ILIKE $233 ESCAPE '\' OR u.username ILIKE $234 ESCAPE '\' OR u.username ILIKE $235 ESCAPE '\' OR u.username ILIKE $236 ESCAPE '\' OR u.username ILIKE $237 ESCAPE '\' OR u.username ILIKE $238 ESCAPE '\' OR u.username ILIKE $239 ESCAPE '\' OR u.username ILIKE $240 ESCAPE '\' OR u.username ILIKE $241 ESCAPE '\' OR u.username ILIKE $242 ESCAPE '\' OR u.username ILIKE $243 ESCAPE '\' OR u.username ILIKE $244 ESCAPE '\' OR u.username ILIKE $245 ESCAPE '\' OR u.username ILIKE $246 ESCAPE '\' OR u.username ILIKE $247 ESCAPE '\' OR u.username ILIKE $248 ESCAPE '\' OR u.username ILIKE $249 ESCAPE '\' OR u.username ILIKE $250 ESCAPE '\' OR u.username ILIKE $251 ESCAPE '\' OR u.username ILIKE $252 ESCAPE '\' OR u.username ILIKE $253 ESCAPE '\' OR u.username ILIKE $254 ESCAPE '\' OR u.username ILIKE $255 ESCAPE '\' OR u.username ILIKE $256 ESCAPE '\' OR u.username ILIKE $257 ESCAPE '\' OR u.username ILIKE $258 ESCAPE '\' OR u.username ILIKE $259 ESCAPE '\' OR u.username ILIKE $260 ESCAPE '\' OR u.username ILIKE $261 ESCAPE '\' OR u.username ILIKE $262 ESCAPE '\' OR u.username ILIKE $263 ESCAPE '\' OR u.username ILIKE $264 ESCAPE '\' OR u.username ILIKE $265 ESCAPE '\' OR u.username ILIKE $266 ESCAPE '\' OR u.username ILIKE $267 ESCAPE '\' OR u.username ILIKE $268 ESCAPE '\' OR u.username ILIKE $269 ESCAPE '\' OR u.username ILIKE $270 ESCAPE '\' OR u.username ILIKE $271 ESCAPE '\' OR u.username ILIKE $272 ESCAPE '\' OR u.username ILIKE $273 ESCAPE '\' OR u.username ILIKE $274 ESCAPE '\' OR u.username ILIKE $275 ESCAPE '\' OR u.username ILIKE $276 ESCAPE '\' OR u.username ILIKE $277 ESCAPE '\' OR u.username ILIKE $278 ESCAPE '\' OR u.username ILIKE $279 ESCAPE '\' OR u.username ILIKE $280 ESCAPE '\' OR u.username ILIKE $281 ESCAPE '\' OR u.username ILIKE $282 ESCAPE '\' OR u.username ILIKE $283 ESCAPE '\' OR u.username ILIKE $284 ESCAPE '\' OR u.username ILIKE $285 ESCAPE '\' OR u.username ILIKE $286 ESCAPE '\' OR u.username ILIKE $287 ESCAPE '\' OR u.username ILIKE $288 ESCAPE '\' OR u.username ILIKE $289 ESCAPE '\' OR u.username ILIKE $290 ESCAPE '\' OR u.username ILIKE $291 ESCAPE '\' OR u.username ILIKE $292 ESCAPE '\' OR u.username ILIKE $293 ESCAPE '\' OR u.username ILIKE $294 ESCAPE '\' OR u.username ILIKE $295 ESCAPE '\' OR u.username ILIKE $296 ESCAPE '\' OR u.username ILIKE $297 ESCAPE '\' OR u.username ILIKE $298 ESCAPE '\' OR u.username ILIKE $299 ESCAPE '\' OR u.username ILIKE $300 ESCAPE '\' OR u.username ILIKE $301 ESCAPE '\' OR u.username ILIKE $302 ESCAPE '\' OR u.username ILIKE $303 ESCAPE '\')  AND 1 =  (  SELECT count(*)  FROM mdl_course_completions cc  WHERE cc.userid = u.id  AND cc.course = $304  AND cc.timecompleted > 0  AND cc.timecompleted <= 1615968017  )  )  OR ( 1=1  AND 1 =  (  SELECT count(*)  FROM mdl_course_completions cc  WHERE cc.userid = u.id  AND cc.course = $305  AND cc.timecompleted > 0  AND cc.timecompleted <= 1615968017  )  AND (1=1 AND EXISTS (  SELECT 1  FROM mdl_user_info_data user_cfv  WHERE user_cfv.userid = u.id  AND user_cfv.fieldid = 8 AND (  (user_cfv.data ILIKE $306 ESCAPE '\' OR user_cfv.data ILIKE $307 ESCAPE '\')  )  ) OR EXISTS (  SELECT 1  FROM mdl_user usr, mdl_user_info_field user_cfd  WHERE usr.id = u.id  AND user_cfd.id = 8  AND NOT EXISTS (  SELECT 1  FROM mdl_user_info_data user_cfv  WHERE user_cfv.userid = usr.id  AND user_cfv.fieldid = 8  ) AND (  (user_cfd.defaultdata ILIKE $308 ESCAPE '\' OR user_cfd.defaultdata ILIKE $309 ESCAPE '\')  )  ))  AND (1=1 AND EXISTS (  SELECT 1  FROM mdl_user_info_data user_cfv  WHERE user_cfv.userid = u.id  AND user_cfv.fieldid = 11 AND (  (user_cfv.data ILIKE $310 ESCAPE '\' OR user_cfv.data ILIKE $311 ESCAPE '\' OR user_cfv.data ILIKE $312 ESCAPE '\' OR user_cfv.data ILIKE $313 ESCAPE '\' OR user_cfv.data ILIKE $314 ESCAPE '\' OR user_cfv.data ILIKE $315 ESCAPE '\' OR user_cfv.data ILIKE $316 ESCAPE '\' OR user_cfv.data ILIKE $317 ESCAPE '\' OR user_cfv.data ILIKE $318 ESCAPE '\' OR user_cfv.data ILIKE $319 ESCAPE '\' OR user_cfv.data ILIKE $320 ESCAPE '\' OR user_cfv.data ILIKE $321 ESCAPE '\' OR user_cfv.data ILIKE $322 ESCAPE '\' OR user_cfv.data ILIKE $323 ESCAPE '\')  )  ) OR EXISTS (  SELECT 1  FROM mdl_user usr, mdl_user_info_field user_cfd  WHERE usr.id = u.id  AND user_cfd.id = 11  AND NOT EXISTS (  SELECT 1  FROM mdl_user_info_data user_cfv  WHERE user_cfv.userid = usr.id  AND user_cfv.fieldid = 11  ) AND (  (user_cfd.defaultdata ILIKE $324 ESCAPE '\' OR user_cfd.defaultdata ILIKE $325 ESCAPE '\' OR user_cfd.defaultdata ILIKE $326 ESCAPE '\' OR user_cfd.defaultdata ILIKE $327 ESCAPE '\' OR user_cfd.defaultdata ILIKE $328 ESCAPE '\' OR user_cfd.defaultdata ILIKE $329 ESCAPE '\' OR user_cfd.defaultdata ILIKE $330 ESCAPE '\' OR user_cfd.defaultdata ILIKE $331 ESCAPE '\' OR user_cfd.defaultdata ILIKE $332 ESCAPE '\' OR user_cfd.defaultdata ILIKE $333 ESCAPE '\' OR user_cfd.defaultdata ILIKE $334 ESCAPE '\' OR user_cfd.defaultdata ILIKE $335 ESCAPE '\' OR user_cfd.defaultdata ILIKE $336 ESCAPE '\' OR user_cfd.defaultdata ILIKE $337 ESCAPE '\')  )  ))  AND not exists (select 1 from mdl_job_assignment ja inner join mdl_org org on ja.organisationid=org.id where ja.userid=u.id and (ja.organisationid IN ($338,$339,$340) OR org.path LIKE '%/75232/%' OR org.path LIKE '%/86156/%' OR org.path LIKE '%/88570/%' ))  AND ((u.username) IS NULL OR ((u.username NOT ILIKE $341 ESCAPE '\')))  AND ((u.username) IS NULL OR ((u.username NOT ILIKE $342 ESCAPE '\')))  AND EXISTS (SELECT 1  FROM mdl_job_assignment ja  INNER JOIN mdl_pos p  ON ja.positionid = p.id  WHERE ja.userid = u.id  AND ( ((p.idnumber) IS NULL OR ((p.idnumber NOT ILIKE $343 ESCAPE '\' AND p.idnumber NOT ILIKE $344 ESCAPE '\'))) ) )  )  ) UNION ALL  SELECT cm.userid AS userid, 0 AS inrules, 1 AS inmembers  FROM mdl_cohort_members cm  WHERE cm.cohortid = $345 ) q  GROUP BY userid  HAVING MAX(inrules) <> MAX(inmembers)";

$param_str_split = explode(',', $param_str);
foreach($param_str_split as $param_substr) {
    $split = explode('=', $param_substr);
    if (count($split) == 2) {
        array_push($keys, trim($split[0]));
        $params[trim($split[0])] = trim($split[1]);
    }
};
foreach($keys as $key){
    $param = $params[$key];
    $regex = "/\\".$key.'\\b/';
    $query_str = preg_replace($regex, $params[$key], $query_str);
}
echo("Hardcode parameters query:\n");
echo($query_str . "\n");

$id = "deleteme_" . uniqid();


$prepare_str = 'PREPARE ' . $id . ' (' . str_repeat('varchar,', count($keys) - 1) . 'varchar) as ' . $query_str . (substr($query_str, -(strlen($query_str))) === ';' ? '' : ';');
$execute_str = 'EXECUTE ' . $id . '(' . implode(',', $params) . ');';

echo("Prepare statement:\n");
echo $prepare_str . "\n";
echo("Execute statement:\n");
echo $execute_str;





